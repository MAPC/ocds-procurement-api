<hr>
<h1>Upload a pdf with Rails form</h1
<hr>


<%= form_with(url: {action: :direct_post}, multipart: true) do %>
  <%= file_field_tag 'pdf' %>
<% end %>

<%= form_with model: @file do |f| %>
  <%= f.file_field :pdf %>
<% end %>

<hr>
<hr>
<hr>
<h1>Upload a pdf with Javascript form</h1>
<hr>

<script>
  function doSubmit(){
    // Form Data
    var formData = new FormData();

    var fileSelect = document.getElementById("fileSelect");
    if(fileSelect.files && fileSelect.files.length == 1){
     var file = fileSelect.files[0]
     formData.set("file", file , file.name);
    }

    var input1 = document.getElementById("input1");
    formData.set("input1", input1.value)
    // Http Request
    var request = new XMLHttpRequest();
    request.open('POST', "http://localhost:8080/s3/direct_post");
    request.send(formData);
  }
</script>
<form>
  <input type="text" id="input1"/>
  <input type="file" id="fileSelect"/>
  <button type="button" onclick="doSubmit()">Submit</button>
</form>
